(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{1183:function(e,t,a){},1184:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(8),i=a.n(r),s=(a(510),a(19)),l=a(25),c=a(21),u=a(20),m=a(22),d=a(49),p=a(52),h=a(81),f=a.n(h),g=a(307),y=a(16),v=a(1187),E=a(1194),b=a(1192),w=a(1188),S=a(471),k=a.n(S),q=function(e){var t=new k.a;t.themeSet.default=t.themeSet.add("\n        /* @theme example */\n\n        section {\n          background-color: #369;\n          color: #fff;\n          font-size: 30px;\n          padding: 40px;\n        }\n\n    h1,\n    h2 {\n      text-align: center;\n      margin: 0;\n    }\n\n    h1 {\n      color: #8cf;\n    }\n    ");var a=t.render(e),n=a.html,o=a.css;return"\n        <!DOCTYPE html>\n        <html><body>\n          <style>".concat(o,"</style>\n          ").concat(n,"\n        </body></html>\n        ")},C=a(44),I=a.n(C),O="https://quiz-hero.herokuapp.com",z=function(e,t){var a=e.length,n=new Array;console.log(a);for(var o=1,r=0;r<a;r++){var i=e[r];console.log(r),console.log(e[r]);var s,l=i.split("\n\n");""==l[l.length-1]&&l.splice(l.length-1,1),console.log(l);var c=new Array;console.log(c);for(var u=0;u<l.length;u++){for(var m="A",d={question:"",answers:[]},p=l[u].split("\n"),h=0;h<p.length;h++){var f=p[h];if(f.length>1)if(console.log(f),"> Question:"===f.slice(0,11))d.question=f.slice(12,f.length);else if("*"===f[0]&&"[x]"===f.slice(2,5)){s=f.slice(6,f.length),d.answers.push({type:m,content:s});var g=m.charCodeAt(0);m=String.fromCharCode(g+1);var y={fileId:t,questionId:o,answer:String.fromCharCode(g),countA:0,countB:0,countC:0,countD:0};o++,console.log(y),I.a.post(O+"/quiz",y,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){console.log("quiz initialize success")})).catch((function(e){console.log(e)}))}else if("*"===f[0]&&"[ ]"===f.slice(2,5)){s=f.slice(6,f.length),d.answers.push({type:m,content:s});g=m.charCodeAt(0);m=String.fromCharCode(g+1)}}c.push(d)}n.push(c),console.log(n)}return console.log(n),n},j=function(e,t){for(var a=new Array(100),n=new Array(100),o=0;o<100;o++)a[o]=new Array,n[o]=new Array;var r=e.split("---\n\n"),i=0;for(o=0;o<r.length;o++){">"===r[o].split(" ")[0]?(n[i].push(r[o]),a[i].push("$$$quiz$$$\n\n"),console.log(i),console.log(n[i]),i++):a[i].push(r[o])}o=0;for(var s=new Array,l=new Array;""!=a[o];)s[o]=a[o].join("---\n\n"),""!=n[o]&&(l[o]=n[o].join("---\n\n")),o++;return{quiz:n=z(l,t),slidesString:s,fileId:t}},A=a(50),x=a(472),N=(a(1186),v.a.Header),Q=(v.a.Content,v.a.Footer,{name:"file",action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",headers:{authorization:"authorization-text"}}),F=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={file:"",fileId:"",rawString:"",data:"",marpitResult:"",display_name:"none"},a.beforeUpload=function(e){console.log("FILEEE",e),a.setState({file:e})},a.onChange=function(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?(console.log(e.file.name),E.a.success("".concat(e.file.name," file uploaded successfully")),a.sendFile().then(a.readFile).then(a.callSeparateQuestion),a.state.display_name=a.display_name()):"error"===e.file.status&&(console.log(e.file.name),E.a.error("".concat(e.file.name," file upload failed.")))},a.onRemove=function(){a.state.display_name=a.display_name()},a.onDownload=function(){!function(e,t){var a=window.URL||window.webkitURL||window,n=new Blob([t]),o=document.createElementNS("http://www.w3.org/1999/xhtml","a");o.href=a.createObjectURL(n),o.download=e,function(e){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}(o)}("filename.html",a.state.marpitResult)},a.sendFile=function(){var e=a.state.file;return new Promise((function(t,n){var o=new FormData;o.append("file",e),o.append("userId",localStorage.getItem("instructorId")),console.log("Send data to backend",o),I.a.post(O+"/upload",o).then((function(e){console.log("CCC",e.data),a.setState({fileId:e.data.fileId}),t(e.data.fileId)})).catch((function(e){n(e)}))}))},a.readFile=function(){var e=a.state.file;return new Promise((function(t,n){var o=new FileReader;o.readAsText(e),o.onload=function(e){a.setState({rawString:o.result}),t(o.result)},o.onerror=function(e){n(e)}}))},a.callSeparateQuestion=function(){var e=j(a.state.rawString,a.state.fileId);console.log(e),a.setState({data:e}),a.getMarpit()},a.getMarpit=function(){var e=q(a.state.rawString);a.setState({marpitResult:e})},a.startSharing=function(){var e=new FormData;e.append("fileId",a.state.fileId),e.append("permission",!0),I.a.post(O+"/quizpermission",e).then((function(){return E.a.success("Share code ".concat(a.state.fileId," is copied on your clipboard"))})).catch((function(){return E.a.error("error")}))},a.stopSharing=function(){var e=new FormData;e.append("fileId",a.state.fileId),e.append("permission",!1),I.a.post(O+"/quizpermission",e).then((function(){return E.a.success("File ".concat(a.state.fileId," stop sharing"))})).catch((function(){return E.a.error("error")}))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"display_name",value:function(){"none"===this.state.display_name?this.setState({display_name:"block"}):"block"===this.state.display_name&&this.setState({display_name:"none"})}},{key:"handleLogOut",value:function(){localStorage.setItem("username",null),localStorage.setItem("instructorId",0),localStorage.setItem("isLogin",0),window.location="/login"}},{key:"render",value:function(){var e=localStorage.getItem("username")?localStorage.getItem("username"):"";return o.a.createElement("div",{className:"App"},o.a.createElement(N,{style:{height:0,padding:0,position:"fixed",zIndex:1,width:"100%"}},o.a.createElement("div",{className:"logo"}),o.a.createElement(b.a,{theme:"white",mode:"horizontal",defaultSelectedKeys:["1"]},o.a.createElement(b.a.Item,{key:"1",style:{marginLeft:"160px"}},o.a.createElement(A.a,{to:"/HomePage"},"Upload")),o.a.createElement(b.a.Item,{key:"2"},o.a.createElement(A.a,{to:"/history"},"History")),o.a.createElement("div",{style:{display:"inline-block",float:"right",paddingRight:"30px"}},"Welcome, ",e,o.a.createElement("button",{onClick:this.handleLogOut,style:{background:"none",border:"none",paddingLeft:"5px",color:"#1890FF",textDecoration:"underline",cursor:"pointer"}},"Log Out")))),o.a.createElement("header",{className:"App-header"},o.a.createElement("img",{src:f.a,className:"App-logo",alt:"logo"}),o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement(w.a,Object.assign({onChange:this.onChange,beforeUpload:this.beforeUpload,onDownload:this.onDownload,onPreview:this.onPreview,onRemove:this.onRemove},Q),o.a.createElement(g.a,null,o.a.createElement(y.a,{type:"upload"})," Click to Upload"))),o.a.createElement("div",{style:{display:this.state.display_name}},o.a.createElement(A.a,{to:{pathname:"/presenter",query:this.state.data}},o.a.createElement(g.a,{size:"large",style:{marginRight:10}},o.a.createElement(y.a,null),"Presenter mode")),o.a.createElement(A.a,{to:{pathname:"/student",query:this.state.data}},o.a.createElement(g.a,{size:"large",style:{marginLeft:10}},o.a.createElement(y.a,null),"Student mode"))),o.a.createElement("div",{style:{display:this.state.display_name}},o.a.createElement(x.CopyToClipboard,{onCopy:this.startSharing,text:this.state.fileId},o.a.createElement(g.a,{size:"large",style:{marginLeft:10}},o.a.createElement(y.a,null),"Start sharing")),o.a.createElement(g.a,{size:"large",style:{marginLeft:10},onClick:this.stopSharing},o.a.createElement(y.a,null),"Stop sharing")))))}}]),t}(o.a.Component),L=a(58),R=a(142);var P=function(e){return o.a.createElement("h2",{className:"question"},e.content)};var T=function(e){return o.a.createElement("div",{className:"questionCount"},"Question ",o.a.createElement("span",null,e.counter)," of ",o.a.createElement("span",null,e.total))};var D=function(e){return o.a.createElement("li",{className:"answerOption"},o.a.createElement("input",{type:"radio",className:"radioCustomButton",name:"radioGroup",checked:e.answerType===e.answer,id:e.answerType,value:e.answerType+" "+e.questionCounter+" "+e.answerContent,disabled:e.answer,onChange:e.onAnswerSelected}),o.a.createElement("label",{className:"radioCustomLabel",htmlFor:e.answerType},e.answerContent))};var _=function(e){return o.a.createElement(R.CSSTransitionGroup,{className:"container",component:"div",transitionName:"fade",transitionEnterTimeout:800,transitionLeaveTimeout:500,transitionAppear:!0,transitionAppearTimeout:500},o.a.createElement("div",{key:e.questionId},o.a.createElement(T,{counter:e.questionId,total:e.questionTotal}),o.a.createElement(P,{content:e.question}),o.a.createElement("ul",{className:"answerOptions"},e.answerOptions.map((function(t){return o.a.createElement(D,{key:t.content,answerContent:t.content,answerType:t.type,answer:e.answer,questionId:e.questionId,onAnswerSelected:e.onAnswerSelected,questionCounter:e.questionCounter})})))))},M=a(479),U=a.n(M),B=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).refreshStatistic=function(){console.log("Push"),a.getStatistic()},a.getStatistic=function(){var e={fileId:a.state.fileId,questionId:1};console.log(e),I.a.get(O+"/quizstat",{params:e}).then((function(e){200===e.status&&(a.setState({quizData:e.data}),console.log("res",e))})).catch((function(e){console.log("error")}))},a.state={quizData:[],fileId:e.fileId},console.log(a.state.fileId),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getStatistic()}},{key:"render",value:function(){var e=this,t=this.state.quizData,a=0,n=[],r=[],i=[],s=[],l=[],c=[],u=[],m=["#C6E579","#FE8463","#32D3EB"];for(var d in t){a+=1,n.push("Q"+a),r.push(t[d].countA),i.push(t[d].countB),s.push(t[d].countC),l.push(t[d].countD),c.push(t[d].answer);var p=t[d].countA+t[d].countB+t[d].countC+t[d].countD,h=0;"A"===t[d].answer?h=t[d].countA:"B"===t[d].answer?h=t[d].countB:"C"===t[d].answer?h=t[d].countC:"D"===t[d].answer&&(h=t[d].countD);var f=h/p*100;u.push(f.toFixed(1))}var y={title:{text:"Quiz Statistic",x:"center"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{data:n},yAxis:[{type:"value",name:"Amount of Choices",position:"left",axisLine:{lineStyle:{color:"black"}}},{type:"value",name:"Correct Percentage",position:"right",axisLine:{lineStyle:{color:"black"}},axisLabel:{formatter:"{value} %"}}],series:[{name:"A",type:"bar",barGap:.1,barWidth:30,data:r,itemStyle:{normal:{color:function(e){return"A"===c[e.dataIndex]?m[0]:m[1]}}}},{name:"B",type:"bar",barWidth:30,data:i,itemStyle:{normal:{color:function(e){return"B"===c[e.dataIndex]?m[0]:m[1]}}}},{name:"C",type:"bar",barWidth:30,data:s,itemStyle:{normal:{color:function(e){return"C"===c[e.dataIndex]?m[0]:m[1]}}}},{name:"D",type:"bar",barWidth:30,data:l,itemStyle:{normal:{color:function(e){return"D"===c[e.dataIndex]?m[0]:m[1]}}}},{name:"Corrent Percentage",type:"line",data:u,yAxisIndex:1,itemStyle:{normal:{color:m[2]}}}]};return o.a.createElement("div",null,o.a.createElement("div",{className:"legend",style:{float:"left"}},o.a.createElement("span",{style:{marginLeft:"10px"}},"Correct Answer"),o.a.createElement("button",{style:{backgroundColor:"#C6E579",width:"30px",height:"15px",margin:"0px 10px",borderRadius:"3px"}}),o.a.createElement("span",{style:{marginLeft:"10px"}},"Wrong Answer"),o.a.createElement("button",{style:{backgroundColor:"#FE8463",width:"30px",height:"15px",margin:"0px 10px",borderRadius:"3px"}})),o.a.createElement(g.a,{onClick:this.refreshStatistic},"Refresh"),o.a.createElement(U.a,{ref:function(t){e.echartsElement=t},option:y,theme:"clear"}))}}]),t}(o.a.Component),H={background:{backgroundColor:"white"},colors:{primary:"white",secondary:"blue",quaternary:"yellow"},fonts:{header:'"Helvetica Neue", Helvetica, Arial, sans-serif'},fontSizes:{h1:"70px",h2:"60px",text:"25px"}},V=a(69),$="> Question: What is your favorite course?";console.log($);var W=function(){return o.a.createElement(V.e,{justifyContent:"space-between",position:"absolute",bottom:0,width:1},o.a.createElement(V.a,{padding:"0 1em"},o.a.createElement(V.f,null)),o.a.createElement(V.a,{padding:"1em"},o.a.createElement(V.n,null)))},G=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onClick=function(){a.toQuizCallback(1),console.log(a.slides)},a.toQuizCallback=e.toQuizCallback,a.slides=e.slides,a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;console.log($);for(var t={backgroundColor:"#ecc",width:"200px",height:"50px",margin:"0px 10px",boarderRadius:"3px",fontSize:"20px"},a=[],n=0,r=0;r<this.slides.length;r++){var i=this.slides[r],s=i.split("---\n\n");console.log(s),"$$$quiz$$$\n\n"===s[s.length-1]?function(){var r=n;s.splice(s.length-1,1),i=s.join("---\n\n"),a.push(o.a.createElement(V.k,{containsSlides:!0},i)),a.push(o.a.createElement(V.p,{style:{backgroundColor:"#fff"}},o.a.createElement(V.g,null,"Now lets do some funny quizzes!"),o.a.createElement(V.g,null,o.a.createElement(g.a,{onClick:function(){e.toQuizCallback(r)},style:t},o.a.createElement(y.a,null)," Click to start quiz")))),n++}():a.push(o.a.createElement(V.k,{containsSlides:!0},i))}return(o.a.createElement(V.d,{loop:!0,theme:H,template:W,style:{backgroundColor:"#fff"}},a))}}]),t}(o.a.Component),J=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).OnClick=function(){a.props.toSlidesCallback()},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(g.a,{onClick:this.OnClick},o.a.createElement(y.a,null)," Back to Slides")}}]),t}(o.a.Component);var K=function(e){return o.a.createElement("div",null,o.a.createElement(R.CSSTransitionGroup,{className:"container result",component:"div",transitionName:"fade",transitionEnterTimeout:800,transitionLeaveTimeout:500,transitionAppear:!0,transitionAppearTimeout:500},o.a.createElement("div",null,"Thank you for finishing the quiz, here are the statistics:")),o.a.createElement(B,{fileId:e.fileId}),o.a.createElement(J,{toSlidesCallback:e.toSlidesCallback}))},Y=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).toQuizCallback=function(e){console.log(e);for(var t=a.state.quizList[e],n=t.map((function(e){return a.shuffleArray(e.answers)})),o=0,r=0;r<e;r++)o+=a.state.quizList[r].length;o++,a.setState({questionId:1,counter:0,quizQuestions:t,question:t[0].question,answerOptions:n[0],quizFlag:1,questionCounter:o})},a.toSlidesCallback=function(){return a.setState({quizFlag:0,result:0})},a.state={counter:0,questionId:1,questionCounter:1,question:"",answerOptions:[],result:"",fileId:e.location.query.fileId,quizCounter:0,quizList:e.location.query.quiz,quizQuestions:e.location.query.quiz[0],slides:e.location.query.slidesString},a.handleAnswerSelected=a.handleAnswerSelected.bind(Object(L.a)(a)),a.skipQuestion=a.skipQuestion.bind(Object(L.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log(this.state.quizQuestions);var t=this.state.quizQuestions.map((function(t){return e.shuffleArray(t.answers)}));this.setState({question:this.state.quizQuestions[0].question,answerOptions:t[0]})}},{key:"shuffleArray",value:function(e){for(var t,a,n=e.length;0!==n;)a=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[a],e[a]=t;return e}},{key:"handleAnswerSelected",value:function(e){var t=this;this.setUserAnswer(e.currentTarget.value),console.log(e.currentTarget.value),this.state.questionId<this.state.quizQuestions.length?setTimeout((function(){return t.setNextQuestion()}),300):setTimeout((function(){return t.setResults()}),300)}},{key:"setUserAnswer",value:function(e){var t=e.split(" "),a=t[0],n=t[1];console.log(t);var o={fileId:this.state.fileId,questionId:parseInt(n),choice:a};console.log(o),I.a.post(O+"/record",o,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){console.log("upload success")})).catch((function(e){console.log("error")}))}},{key:"setNextQuestion",value:function(){var e=this.state.counter+1,t=this.state.questionId+1,a=this.state.questionCounter+1;this.setState({counter:e,questionId:t,question:this.state.quizQuestions[e].question,answerOptions:this.state.quizQuestions[e].answers,answer:"",questionCounter:a})}},{key:"skipQuestion",value:function(){var e=this;this.state.questionId<this.state.quizQuestions.length?setTimeout((function(){return e.setNextQuestion()}),300):setTimeout((function(){return e.setResults()}),300)}},{key:"setResults",value:function(e){this.setState({result:1})}},{key:"renderQuiz",value:function(){return o.a.createElement("div",null,o.a.createElement(_,{answer:this.state.answer,answerOptions:this.state.answerOptions,questionId:this.state.questionId,question:this.state.question,questionTotal:this.state.quizQuestions.length,onAnswerSelected:this.handleAnswerSelected,questionCounter:this.state.questionCounter}),o.a.createElement(g.a,{onClick:this.skipQuestion},o.a.createElement(y.a,null)," Skip"))}},{key:"renderResult",value:function(){return o.a.createElement(K,{fileId:this.state.fileId,toSlidesCallback:this.toSlidesCallback})}},{key:"renderQuizPages",value:function(){return o.a.createElement("div",{className:"Quiz-page"},o.a.createElement("div",{className:"Quiz-header"}),this.state.result?this.renderResult():this.renderQuiz())}},{key:"renderSlides",value:function(){return o.a.createElement("div",null,o.a.createElement(G,{toQuizCallback:this.toQuizCallback,slides:this.state.slides}))}},{key:"render",value:function(){return o.a.createElement("div",null,this.state.quizFlag?this.renderQuizPages():this.renderSlides())}}]),t}(n.Component);var X=function(e){return o.a.createElement("div",null,o.a.createElement(R.CSSTransitionGroup,{className:"container result",component:"div",transitionName:"fade",transitionEnterTimeout:800,transitionLeaveTimeout:500,transitionAppear:!0,transitionAppearTimeout:500},o.a.createElement("div",null,"Thank you for finishing the quiz, please go back to the slides.")),o.a.createElement(J,{toSlidesCallback:e.toSlidesCallback}))},Z=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).toQuizCallback=function(e){console.log(e);for(var t=a.state.quizList[e],n=t.map((function(e){return a.shuffleArray(e.answers)})),o=0,r=0;r<e;r++)o+=a.state.quizList[r].length;o++,a.setState({questionId:1,counter:0,quizQuestions:t,question:t[0].question,answerOptions:n[0],quizFlag:1,questionCounter:o})},a.toSlidesCallback=function(){return a.setState({quizFlag:0,result:0})},a.state={counter:0,questionCounter:1,questionId:1,question:"",answerOptions:[],result:"",fileId:e.location.query.fileId,quizBlockCounter:0,quizList:e.location.query.quiz,quizQuestions:e.location.query.quiz[0],slides:e.location.query.slidesString},a.handleAnswerSelected=a.handleAnswerSelected.bind(Object(L.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.quizQuestions.map((function(t){return e.shuffleArray(t.answers)}));this.setState({question:this.state.quizQuestions[0].question,answerOptions:t[0]})}},{key:"shuffleArray",value:function(e){for(var t,a,n=e.length;0!==n;)a=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[a],e[a]=t;return e}},{key:"handleAnswerSelected",value:function(e){var t=this;this.setUserAnswer(e.currentTarget.value),console.log(e.currentTarget.value),this.state.questionId<this.state.quizQuestions.length?setTimeout((function(){return t.setNextQuestion()}),300):setTimeout((function(){return t.setResults()}),300)}},{key:"setUserAnswer",value:function(e){var t=e.split(" "),a=t[0],n=t[1];console.log(t);var o={fileId:this.state.fileId,questionId:parseInt(n),choice:a};console.log(o),I.a.post(O+"/record",o,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){console.log("upload success")})).catch((function(e){console.log("error")}))}},{key:"setNextQuestion",value:function(){var e=this.state.counter+1,t=this.state.questionId+1,a=this.state.questionCounter+1;this.setState({counter:e,questionId:t,question:this.state.quizQuestions[e].question,answerOptions:this.state.quizQuestions[e].answers,answer:"",questionCounter:a})}},{key:"setResults",value:function(e){this.setState({result:1})}},{key:"renderQuiz",value:function(){return o.a.createElement(_,{answer:this.state.answer,answerOptions:this.state.answerOptions,questionId:this.state.questionId,question:this.state.question,questionTotal:this.state.quizQuestions.length,onAnswerSelected:this.handleAnswerSelected,questionCounter:this.state.questionCounter})}},{key:"renderResult",value:function(){return o.a.createElement(X,{quizResult:this.state.result,toSlidesCallback:this.toSlidesCallback})}},{key:"renderQuizPages",value:function(){return o.a.createElement("div",{className:"Quiz-page"},o.a.createElement("div",{className:"Quiz-header"}),this.state.result?this.renderResult():this.renderQuiz())}},{key:"renderSlides",value:function(){return o.a.createElement("div",null,o.a.createElement(G,{toQuizCallback:this.toQuizCallback,slides:this.state.slides}))}},{key:"render",value:function(){return o.a.createElement("div",null,this.state.quizFlag?this.renderQuizPages():this.renderSlides())}}]),t}(n.Component),ee=(a(1185),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).toLogin=function(){window.location="/login"},a.toEnterCode=function(){window.location="/StudentRequestPage"},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},o.a.createElement("img",{src:f.a,className:"App-logo",alt:"logo"}),o.a.createElement("div",null,o.a.createElement(g.a,{onClick:this.toLogin,size:"large",style:{marginRight:10}},o.a.createElement(y.a,null),"I'm a Presenter"),o.a.createElement(g.a,{onClick:this.toEnterCode,size:"large",style:{marginRight:10}},o.a.createElement(y.a,null),"I'm a Student"))))}}]),t}(n.Component)),te=a(1190),ae=a(1191),ne=a(1193),oe=a(1196),re=a(1197),ie=a(102),se=(a(467),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).formRef=o.a.createRef(),a.onFinish=function(e){console.log("Received values of form: ",e)},a.handleSubmit=function(){var e=a.props.history,t=a.props.form.getFieldValue("email")?a.props.form.getFieldValue("email"):null,n=a.props.form.getFieldValue("password")?a.props.form.getFieldValue("password"):null;if(console.log(t),console.log(n),null!==t&&null!==n){var o={email:t,pswd:n};I.a.post(O+"/login",{},{params:o}).then((function(t){console.log(t.status),201===t.status&&(console.log("Login success"),E.a.loading("Login success, directing you to HomePage",[2],onclose=function(){a.props.login(t.data.name,t.data.instructorId),localStorage.setItem("instructorId",t.data.instructorId),localStorage.setItem("username",t.data.name),localStorage.setItem("isLogin",1),e.push("/HomePage")}))})).catch((function(e){console.log(e)}))}else E.a.error("All fields must be filled")},a.registerButtonHandler=function(){window.location="/register"},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldProps,t=this.props,a=t.instructorId,n=t.username;return console.log("Name",n),console.log("ID",a),o.a.createElement("div",{className:"login-page-container"},o.a.createElement("img",{src:f.a,className:"App-logo",alt:"logo"}),o.a.createElement(te.a,{name:"normal_login",className:"login-form",initialValues:{remember:!0},ref:this.formRef},o.a.createElement(te.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Email!"}]},o.a.createElement(ae.a,Object.assign({className:"login-input",prefix:o.a.createElement(oe.a,{className:"site-form-item-icon"}),placeholder:"Email"},e("email")))),o.a.createElement(te.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}]},o.a.createElement(ae.a,Object.assign({className:"login-input",prefix:o.a.createElement(re.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password"},e("password")))),o.a.createElement(te.a.Item,null,o.a.createElement(te.a.Item,{className:"remember-me-box",name:"remember",valuePropName:"checked",noStyle:!0},o.a.createElement(ne.a,null,"Remember me"))),o.a.createElement(te.a.Item,null,o.a.createElement(g.a,{type:"primary",className:"login-form-button",onClick:this.handleSubmit},"Log in"),o.a.createElement(g.a,{type:"primary",className:"register-button",onClick:this.registerButtonHandler},"Register"))))}}]),t}(n.Component)),le=te.a.create({name:"LoginPage"})(Object(ie.b)((function(e){return{instructorId:e.setUserName.instructorId,username:e.setUserName.username}}),(function(e){return{login:function(t,a){e(function(e,t){return{type:"ADD_USERNAME",instructorId:t,username:e}}(t,a))}}}))(se)),ce=a(1198),ue=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).onFinish=function(e){console.log("Received values of form: ",e)},a.handleSubmit=function(e,t){var n=a.props.form.getFieldValue("username")?a.props.form.getFieldValue("username"):null,o=a.props.form.getFieldValue("email")?a.props.form.getFieldValue("email"):null,r=a.props.form.getFieldValue("password")?a.props.form.getFieldValue("password"):null;if(null!==o&&null!==r&&null!==n){var i={name:n,email:o,pswd:r};I.a.post(O+"/register",i).then((function(e){console.log(e.status),201===e.status&&E.a.loading("Register success, directing you to HomePage",[2],onclose=function(){console.log(e),localStorage.setItem("instructorId",e.data.instructorId),localStorage.setItem("username",e.data.name),localStorage.setItem("isLogin",1),window.location="/HomePage"})})).catch((function(e){console.log(e)}))}else E.a.error("All fields must be filled")},a.backButtonHandler=function(){window.location.replace(O+"/login")},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldProps;return o.a.createElement("div",{className:"login-page-container"},o.a.createElement("img",{src:f.a,className:"App-logo",alt:"logo"}),o.a.createElement(te.a,{name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:this.onFinish},o.a.createElement(te.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}]},o.a.createElement(ae.a,Object.assign({className:"login-input",prefix:o.a.createElement(oe.a,{className:"site-form-item-icon"}),placeholder:"Username"},e("username")))),o.a.createElement(te.a.Item,{name:"email",rules:[{required:!0,message:"Please input your email!"}]},o.a.createElement(ae.a,Object.assign({className:"login-input",prefix:o.a.createElement(ce.a,{className:"site-form-item-icon"}),placeholder:"Email"},e("email")))),o.a.createElement(te.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}]},o.a.createElement(ae.a,Object.assign({className:"login-input",prefix:o.a.createElement(re.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password"},e("password")))),o.a.createElement(te.a.Item,{style:{marginTop:"20%"}},o.a.createElement(g.a,{type:"primary",htmlType:"submit",className:"login-form-button",onClick:this.handleSubmit},"Register"),o.a.createElement(g.a,{type:"primary",className:"register-button",onClick:this.backButtonHandler},"Back"))))}}]),t}(n.Component),me=te.a.create({name:"LoginPage"})(Object(ie.b)((function(e){}),(function(e){}))(ue)),de=(a(1181),ae.a.Search),pe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onSearch=function(e,t){var n={fileId:e};I.a.get(O+"/quizpermission",{params:n}).then((function(t){console.log("AAA",t.data),a.setState({permission:t.data},a.fetchFile),alert("File ".concat(e," found."))})).catch((function(e){alert("File doesn't exist!")}))},a.fetchFile=function(){var e={fileId:a.state.fileId};!0===a.state.permission?I.a.get(O+"/fetch",{params:e}).then((function(e){console.log("AAA",e.data),a.setState({MarkDownFile:e.data,fileId:a.state.fileId},a.generateSlides),alert("File ".concat(a.state.fileId," fetched successfully."))})).catch((function(e){alert("Fail to fetch File ".concat(a.state.fileId,"."))})):alert("Sorry, you don't have the permission to access file ".concat(a.state.fileId,". Please contact the presenter."))},a.generateSlides=function(){a.callSeparateQuestion(),a.state.display_name=a.display_name()},a.callSeparateQuestion=function(){var e=j(a.state.MarkDownFile,a.state.fileId);console.log(e),a.setState({data:e}),a.getMarpit()},a.getMarpit=function(){var e=q(a.state.MarkDownFile);a.setState({marpitResult:e})},a.download=function(){!function(e,t){var a=window.URL||window.webkitURL||window,n=new Blob([t]),o=document.createElementNS("http://www.w3.org/1999/xhtml","a");o.href=a.createObjectURL(n),o.download=e,function(e){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}(o)}("filename.html",a.state.marpitResult)},a.state={fileId:"",permission:!1,MarkDownFile:"",display_name:"none"},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"display_name",value:function(){"none"===this.state.display_name?this.setState({display_name:"block"}):"block"===this.state.display_name&&this.setState({display_name:"none"})}},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},o.a.createElement("img",{src:f.a,className:"App-logo",alt:"logo"}),o.a.createElement(de,{style:{width:400},placeholder:"input shared url",enterButton:"Search",size:"large",onSearch:this.onSearch}),o.a.createElement("div",{style:{display:this.state.display_name}},o.a.createElement(A.a,{to:{pathname:"/student",query:this.state.data}},o.a.createElement(g.a,{onClick:this.onClick,size:"large",style:{marginLeft:10}},o.a.createElement(y.a,null),"Go to Presentation")),o.a.createElement(g.a,{onClick:this.download,size:"large",style:{marginLeft:10}},o.a.createElement(y.a,null),"Download file"))))}}]),t}(n.Component),he=(a(470),a(1189)),fe=a(1195),ge=v.a.Header,ye=(v.a.Content,v.a.Footer,[{title:"demo.md"},{title:"presentation.md"},{title:"oose.md"},{title:"design pattern .md"}]),ve=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={data:[],list:[]},a.getData=function(e){a.setState({data:ye,list:ye})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.getData((function(t){e.setState({data:ye,list:ye})}))}},{key:"render",value:function(){var e=this.state,t=e.initLoading,a=(e.loading,e.list);return o.a.createElement("div",{className:"App"},o.a.createElement(ge,{style:{height:0,padding:0,position:"fixed",zIndex:1,width:"100%"}},o.a.createElement("div",{className:"logo"}),o.a.createElement(b.a,{theme:"white",mode:"horizontal",defaultSelectedKeys:["2"]},o.a.createElement(b.a.Item,{key:"1"},o.a.createElement(A.a,{to:"/HomePage"},"Upload")),o.a.createElement(b.a.Item,{key:"2"},o.a.createElement(A.a,{to:"/history"},"History")))),o.a.createElement("div",{style:{padding:45,paddingTop:60}},o.a.createElement(he.a,{"margin-top":"50px",className:"demo-loadmore-list",loading:t,itemLayout:"horizontal",dataSource:a,renderItem:function(e){return o.a.createElement(he.a.Item,{actions:[o.a.createElement("a",{key:"list-loadmore-edit"},"View"),o.a.createElement("a",{key:"list-loadmore-more"},"Download")]},o.a.createElement(fe.a,{avatar:!0,title:!1,loading:e.loading,active:!0},o.a.createElement(he.a.Item.Meta,{title:o.a.createElement("a",{href:"https://ant.design"},e.title)})))}})))}}]),t}(o.a.Component),Ee=a(219),be=function(){var e=localStorage.getItem("isLogin");return"1"===e||(console.log("Return false",e),!1)},we=function(e){var t=e.component,a=Object(Ee.a)(e,["component"]);return(o.a.createElement(p.b,Object.assign({},a,{render:function(e){return be()?o.a.createElement(t,e):o.a.createElement(p.a,{to:"/login"})}})))},Se=function(e){var t=e.component,a=e.restricted,n=Object(Ee.a)(e,["component","restricted"]);return(o.a.createElement(p.b,Object.assign({},n,{render:function(e){return be()&&a?o.a.createElement(p.a,{to:"/HomePage"}):o.a.createElement(t,e)}})))},ke=Object(d.a)(),qe=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){this.props.instructorId;return o.a.createElement(p.c,{history:ke},o.a.createElement(p.d,null,o.a.createElement(Se,{restricted:!1,component:ee,path:"/",exact:!0}),o.a.createElement(Se,{restricted:!1,component:le,path:"/login",exact:!0}),o.a.createElement(Se,{restricted:!1,component:me,path:"/register",exact:!0}),o.a.createElement(Se,{restricted:!1,component:pe,path:"/StudentRequestPage",exact:!0}),o.a.createElement(Se,{restricted:!1,component:Z,path:"/student",exact:!0}),o.a.createElement(we,{component:F,path:"/HomePage",exact:!0}),o.a.createElement(we,{component:Y,path:"/presenter",exact:!0}),o.a.createElement(we,{component:ve,path:"/history",exact:!0})))}}]),t}(n.Component),Ce=Object(ie.b)((function(e){return{instructorId:e.setUserName.instructorId}}))(qe),Ie=(a(1183),Object(d.a)(),function(e){function t(e){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){localStorage.setItem("isLogin",0)}},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(Ce,null))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Oe=a(145),ze=a(495),je=a(496),Ae={username:null,instructorId:0},xe=function(e,t){switch(t.type){case"ADD_USERNAME":var a=t.username||"",n=t.instructorId||0;return Object(je.a)({},e,{username:a,instructorId:n});default:return Ae}},Ne=Object(Oe.c)({setUserName:xe}),Qe=Object(Oe.d)(Ne,Object(Oe.a)(ze.a));Qe.subscribe((function(){console.log("somthing: ",Qe.getState())})),i.a.render(o.a.createElement(ie.a,{store:Qe},o.a.createElement(Ie,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},467:function(e,t,a){},505:function(e,t,a){e.exports=a(1184)},510:function(e,t,a){},572:function(e,t){},573:function(e,t){},574:function(e,t){},592:function(e,t){},81:function(e,t,a){e.exports=a.p+"static/media/logo.0eb5e1f8.png"}},[[505,1,2]]]);
//# sourceMappingURL=main.c2449fb9.chunk.js.map