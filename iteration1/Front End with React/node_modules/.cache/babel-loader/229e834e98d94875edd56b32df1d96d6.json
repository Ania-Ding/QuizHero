{"ast":null,"code":"\"use strict\";\n\nvar _toConsumableArray = require(\"/Users/yaozixuan/Document/OOSE/my-app/node_modules/@babel/runtime/helpers/toConsumableArray\");\n\nvar _classCallCheck = require(\"/Users/yaozixuan/Document/OOSE/my-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/yaozixuan/Document/OOSE/my-app/node_modules/@babel/runtime/helpers/createClass\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _postcss = _interopRequireDefault(require(\"postcss\"));\n\nvar _advanced_background = _interopRequireDefault(require(\"./postcss/advanced_background\"));\n\nvar _replace = _interopRequireDefault(require(\"./postcss/import/replace\"));\n\nvar _rollup = _interopRequireDefault(require(\"./postcss/import/rollup\"));\n\nvar _suppress = _interopRequireDefault(require(\"./postcss/import/suppress\"));\n\nvar _pagination = _interopRequireDefault(require(\"./postcss/pagination\"));\n\nvar _printable = _interopRequireWildcard(require(\"./postcss/printable\"));\n\nvar _prepend = _interopRequireDefault(require(\"./postcss/pseudo_selector/prepend\"));\n\nvar _replace2 = _interopRequireDefault(require(\"./postcss/pseudo_selector/replace\"));\n\nvar _theme = _interopRequireDefault(require(\"./theme\"));\n\nvar _scaffold = _interopRequireDefault(require(\"./theme/scaffold\"));\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/**\n * Marpit theme set class.\n */\n\n\nvar ThemeSet =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Create a ThemeSet instance.\n   */\n  function ThemeSet() {\n    _classCallCheck(this, ThemeSet);\n\n    /**\n     * An instance of default theme.\n     *\n     * While running {@link ThemeSet#pack}, ThemeSet will use this theme when\n     * the definition of theme directive or the theme with specified name is not\n     * found.\n     *\n     * By default, Marpit does not provide default theme (`undefined`).\n     *\n     * @type {Theme|undefined}\n     */\n    this.default = undefined;\n    /**\n     * The default type settings for theme metadata added by\n     * {@link ThemeSet#add}.\n     *\n     * A key of object is the name of metadata and a value is the type which of\n     * `String` and `Array`. You have to set `Array` if the theme allows\n     * multi-time definitions in same meta key.\n     *\n     * ```css\n     * /**\n     *  * @theme example\n     *  * @foo Single value\n     *  * @foo allows only one string\n     *  * @bar Multiple value 1\n     *  * @bar Multiple value 2\n     *  * @bar Multiple value 3\n     *  * ...\n     * ```\n     *\n     * ```js\n     * const themeSet = new ThemeSet()\n     *\n     * themeSet.metaType = {\n     *   foo: String,\n     *   bar: Array,\n     * }\n     *\n     * themeSet.add(css)\n     *\n     * console.log(themeSet.getThemeMeta('example', 'foo'))\n     * // => 'allows only one string'\n     *\n     * console.log(themeSet.getThemeMeta('example', 'bar'))\n     * // => ['Multiple value 1', 'Multiple value 2', 'Multiple value 3']\n     * ```\n     *\n     * @type {Object}\n     */\n\n    this.metaType = {};\n    Object.defineProperty(this, 'themeMap', {\n      value: new Map()\n    });\n  }\n  /**\n   * Return the number of themes.\n   *\n   * @type {number}\n   * @readonly\n   */\n\n\n  _createClass(ThemeSet, [{\n    key: \"add\",\n\n    /**\n     * Add theme CSS from string.\n     *\n     * @param {string} css The theme CSS string.\n     * @returns {Theme} A created {@link Theme} instance.\n     * @throws Will throw an error if the theme name is not specified by `@theme`\n     *     metadata.\n     */\n    value: function add(css) {\n      var theme = _theme.default.fromCSS(css, {\n        metaType: this.metaType\n      });\n\n      this.addTheme(theme);\n      return theme;\n    }\n    /**\n     * Add theme instance.\n     *\n     * @param {Theme} theme The theme instance.\n     * @throws Will throw an error if the theme name is not specified.\n     */\n\n  }, {\n    key: \"addTheme\",\n    value: function addTheme(theme) {\n      if (!(theme instanceof _theme.default)) throw new Error('ThemeSet can add only an instance of Theme.');\n      if (typeof theme.name !== 'string') throw new Error('An instance of Theme requires name.');\n      this.themeMap.set(theme.name, theme);\n    }\n    /**\n     * Removes all themes from a {@link themeSet} object.\n     */\n\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      return this.themeMap.clear();\n    }\n    /**\n     * Remove a specific named theme from a {@link themeSet} object.\n     *\n     * @param {string} name The theme name to delete.\n     * @returns {boolean} Returns `true` if a theme in current {@link ThemeSet}\n     *     existed and has been removed, or `false` if the theme does not exist.\n     */\n\n  }, {\n    key: \"delete\",\n    value: function _delete(name) {\n      return this.themeMap.delete(name);\n    }\n    /**\n     * Returns a specific named theme.\n     *\n     * @param {string} name The theme name to get.\n     * @param {boolean} [fallback=false] If true, return instance's default theme\n     *     or scaffold theme when specified theme cannot find.\n     * @returns {Theme|undefined} Returns specified or fallbacked theme, or\n     *     `undefined` if `fallback` is false and the specified theme has not\n     *     existed.\n     */\n\n  }, {\n    key: \"get\",\n    value: function get(name) {\n      var fallback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var theme = this.themeMap.get(name);\n      return fallback ? theme || this.default || _scaffold.default : theme;\n    }\n    /**\n     * Returns value(s) of specified metadata from a theme. It considers `@import`\n     * and `@import-theme` rules in getting meta value. On the other hand, the\n     * default theme specified by the instance is not considered.\n     *\n     * To support metadata with array type, it will merge into a flatten array\n     * when the all of got valid values that includes imported themes are array.\n     *\n     * @param {string|Theme} theme The theme name or instance.\n     * @param {string} meta The meta name to get.\n     * @returns {string|string[]|undefined}\n     */\n\n  }, {\n    key: \"getThemeMeta\",\n    value: function getThemeMeta(theme, meta) {\n      var themeInstance = theme instanceof _theme.default ? theme : this.get(theme);\n      var metas = themeInstance ? this.resolveImport(themeInstance).map(function (t) {\n        return t.meta[meta];\n      }).filter(function (m) {\n        return m;\n      }) : []; // Flatten in order of definitions when the all of valid values are array\n\n      if (metas.length > 0 && metas.every(function (m) {\n        return Array.isArray(m);\n      })) {\n        var mergedArray = [];\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = metas[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var m = _step.value;\n            mergedArray.unshift.apply(mergedArray, _toConsumableArray(m));\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return != null) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        return mergedArray;\n      }\n\n      return metas[0];\n    }\n    /**\n     * Returns the value of specified property name from a theme. It considers\n     * `@import` and `@import-theme` rules in getting value.\n     *\n     * It will fallback the reference object into the instance's default theme or\n     * scaffold theme when the specified theme is `undefined`.\n     *\n     * @param {string|Theme} theme The theme name or instance.\n     * @param {string} prop The property name to get.\n     * @returns {*}\n     */\n\n  }, {\n    key: \"getThemeProp\",\n    value: function getThemeProp(theme, prop) {\n      var themeInstance = theme instanceof _theme.default ? theme : this.get(theme);\n      var props = themeInstance ? this.resolveImport(themeInstance).map(function (t) {\n        return t[prop];\n      }) : [];\n      return [].concat(_toConsumableArray(props), [this.default && this.default[prop], _scaffold.default[prop]]).find(function (t) {\n        return t;\n      });\n    }\n    /**\n     * Returns a boolean indicating whether a specific named theme exists or not.\n     *\n     * @param {string} name The theme name.\n     * @returns {boolean} Returns `true` if a specific named theme exists,\n     *     otherwise `false`.\n     */\n\n  }, {\n    key: \"has\",\n    value: function has(name) {\n      return this.themeMap.has(name);\n    }\n    /**\n     * Convert registered theme CSS into usable in the rendered markdown by\n     * {@link Marpit#render}.\n     *\n     * You should use {@link Marpit#render} unless there is some particular\n     * reason.\n     *\n     * @param {string} name The theme name. It will use the instance's default\n     *     theme or scaffold theme when a specific named theme does not exist.\n     * @param {Object} [opts] The option object passed by {@link Marpit#render}.\n     * @param {string} [opts.after] A CSS string to append into after theme.\n     * @param {string} [opts.before] A CSS string to prepend into before theme.\n     * @param {Element[]} [opts.containers] Container elements wrapping whole\n     *     slide deck.\n     * @param {boolean} [opts.printable] Make style printable to PDF.\n     * @param {boolean} [opts.inlineSVG] Apply a hierarchy of inline SVG to CSS\n     *     selector by setting `true`. _(Experimental)_\n     * @return {string} The converted CSS string.\n     */\n\n  }, {\n    key: \"pack\",\n    value: function pack(name) {\n      var _this = this;\n\n      var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var slideElements = [{\n        tag: 'section'\n      }];\n      var theme = this.get(name, true);\n      if (opts.inlineSVG) slideElements.unshift({\n        tag: 'svg'\n      }, {\n        tag: 'foreignObject'\n      });\n\n      var additionalCSS = function additionalCSS(css) {\n        if (!css) return undefined;\n\n        try {\n          return (0, _postcss.default)([(0, _suppress.default)(_this)]).process(css).css;\n        } catch (e) {\n          return undefined;\n        }\n      };\n\n      var after = additionalCSS(opts.after);\n      var before = additionalCSS(opts.before);\n      var packer = (0, _postcss.default)([before && function (css) {\n        return css.first.before(before);\n      }, after && function (css) {\n        return css.last.after(after);\n      }, _rollup.default, (0, _replace.default)(this), opts.printable && (0, _printable.default)({\n        width: this.getThemeProp(theme, 'width'),\n        height: this.getThemeProp(theme, 'height')\n      }), theme !== _scaffold.default && function (css) {\n        return css.first.before(_scaffold.default.css);\n      }, opts.inlineSVG && _advanced_background.default, _pagination.default, _prepend.default, (0, _replace2.default)(opts.containers, slideElements), opts.printable && _printable.postprocess, _rollup.default].filter(function (p) {\n        return p;\n      }));\n      return packer.process(theme.css).css;\n    }\n    /**\n     * Returns a `Iterator` object that contains registered themes to current\n     * instance.\n     *\n     * @returns {Iterator.<Theme>}\n     */\n\n  }, {\n    key: \"themes\",\n    value: function themes() {\n      return this.themeMap.values();\n    }\n    /**\n     * Resolves `@import` and `@import-theme` and returns an array of using theme\n     * instances.\n     *\n     * @private\n     * @param {Theme} theme Theme instance\n     * @returns {Theme[]}\n     */\n\n  }, {\n    key: \"resolveImport\",\n    value: function resolveImport(theme) {\n      var _this2 = this;\n\n      var importedThemes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n      var name = theme.name;\n      if (importedThemes.includes(name)) throw new Error(\"Circular \\\"\".concat(name, \"\\\" theme import is detected.\"));\n      var resolvedThemes = [theme];\n      theme.importRules.forEach(function (m) {\n        var importTheme = _this2.get(m.value);\n\n        if (importTheme) resolvedThemes.push.apply(resolvedThemes, _toConsumableArray(_this2.resolveImport(importTheme, [].concat(_toConsumableArray(importedThemes), [name]).filter(function (n) {\n          return n;\n        }))));\n      });\n      return resolvedThemes.filter(function (v) {\n        return v;\n      });\n    }\n  }, {\n    key: \"size\",\n    get: function get() {\n      return this.themeMap.size;\n    }\n  }]);\n\n  return ThemeSet;\n}();\n\nvar _default = ThemeSet;\nexports.default = _default;","map":{"version":3,"sources":["/Users/yaozixuan/Document/OOSE/my-app/node_modules/@marp-team/marpit/lib/theme_set.js"],"names":["Object","defineProperty","exports","value","default","_postcss","_interopRequireDefault","require","_advanced_background","_replace","_rollup","_suppress","_pagination","_printable","_interopRequireWildcard","_prepend","_replace2","_theme","_scaffold","_getRequireWildcardCache","WeakMap","cache","obj","__esModule","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","ThemeSet","undefined","metaType","Map","css","theme","fromCSS","addTheme","Error","name","themeMap","clear","delete","fallback","meta","themeInstance","metas","resolveImport","map","t","filter","m","length","every","Array","isArray","mergedArray","unshift","prop","props","find","opts","slideElements","tag","inlineSVG","additionalCSS","process","e","after","before","packer","first","last","printable","width","getThemeProp","height","containers","postprocess","p","values","importedThemes","includes","resolvedThemes","importRules","forEach","importTheme","push","n","v","size","_default"],"mappings":"AAAA;;;;;;;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAACE,OAAR,GAAkB,KAAK,CAAvB;;AAEA,IAAIC,QAAQ,GAAGC,sBAAsB,CAACC,OAAO,CAAC,SAAD,CAAR,CAArC;;AAEA,IAAIC,oBAAoB,GAAGF,sBAAsB,CAACC,OAAO,CAAC,+BAAD,CAAR,CAAjD;;AAEA,IAAIE,QAAQ,GAAGH,sBAAsB,CAACC,OAAO,CAAC,0BAAD,CAAR,CAArC;;AAEA,IAAIG,OAAO,GAAGJ,sBAAsB,CAACC,OAAO,CAAC,yBAAD,CAAR,CAApC;;AAEA,IAAII,SAAS,GAAGL,sBAAsB,CAACC,OAAO,CAAC,2BAAD,CAAR,CAAtC;;AAEA,IAAIK,WAAW,GAAGN,sBAAsB,CAACC,OAAO,CAAC,sBAAD,CAAR,CAAxC;;AAEA,IAAIM,UAAU,GAAGC,uBAAuB,CAACP,OAAO,CAAC,qBAAD,CAAR,CAAxC;;AAEA,IAAIQ,QAAQ,GAAGT,sBAAsB,CAACC,OAAO,CAAC,mCAAD,CAAR,CAArC;;AAEA,IAAIS,SAAS,GAAGV,sBAAsB,CAACC,OAAO,CAAC,mCAAD,CAAR,CAAtC;;AAEA,IAAIU,MAAM,GAAGX,sBAAsB,CAACC,OAAO,CAAC,SAAD,CAAR,CAAnC;;AAEA,IAAIW,SAAS,GAAGZ,sBAAsB,CAACC,OAAO,CAAC,kBAAD,CAAR,CAAtC;;AAEA,SAASY,wBAAT,GAAoC;AAAE,MAAI,OAAOC,OAAP,KAAmB,UAAvB,EAAmC,OAAO,IAAP;AAAa,MAAIC,KAAK,GAAG,IAAID,OAAJ,EAAZ;;AAA2BD,EAAAA,wBAAwB,GAAG,oCAAY;AAAE,WAAOE,KAAP;AAAe,GAAxD;;AAA0D,SAAOA,KAAP;AAAe;;AAE1L,SAASP,uBAAT,CAAiCQ,GAAjC,EAAsC;AAAE,MAAIA,GAAG,IAAIA,GAAG,CAACC,UAAf,EAA2B;AAAE,WAAOD,GAAP;AAAa;;AAAC,MAAIA,GAAG,KAAK,IAAR,IAAgB,OAAOA,GAAP,KAAe,QAAf,IAA2B,OAAOA,GAAP,KAAe,UAA9D,EAA0E;AAAE,WAAO;AAAElB,MAAAA,OAAO,EAAEkB;AAAX,KAAP;AAA0B;;AAAC,MAAID,KAAK,GAAGF,wBAAwB,EAApC;;AAAwC,MAAIE,KAAK,IAAIA,KAAK,CAACG,GAAN,CAAUF,GAAV,CAAb,EAA6B;AAAE,WAAOD,KAAK,CAACI,GAAN,CAAUH,GAAV,CAAP;AAAwB;;AAAC,MAAII,MAAM,GAAG,EAAb;AAAiB,MAAIC,qBAAqB,GAAG3B,MAAM,CAACC,cAAP,IAAyBD,MAAM,CAAC4B,wBAA5D;;AAAsF,OAAK,IAAIC,GAAT,IAAgBP,GAAhB,EAAqB;AAAE,QAAItB,MAAM,CAAC8B,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCV,GAArC,EAA0CO,GAA1C,CAAJ,EAAoD;AAAE,UAAII,IAAI,GAAGN,qBAAqB,GAAG3B,MAAM,CAAC4B,wBAAP,CAAgCN,GAAhC,EAAqCO,GAArC,CAAH,GAA+C,IAA/E;;AAAqF,UAAII,IAAI,KAAKA,IAAI,CAACR,GAAL,IAAYQ,IAAI,CAACC,GAAtB,CAAR,EAAoC;AAAElC,QAAAA,MAAM,CAACC,cAAP,CAAsByB,MAAtB,EAA8BG,GAA9B,EAAmCI,IAAnC;AAA2C,OAAjF,MAAuF;AAAEP,QAAAA,MAAM,CAACG,GAAD,CAAN,GAAcP,GAAG,CAACO,GAAD,CAAjB;AAAyB;AAAE;AAAE;;AAACH,EAAAA,MAAM,CAACtB,OAAP,GAAiBkB,GAAjB;;AAAsB,MAAID,KAAJ,EAAW;AAAEA,IAAAA,KAAK,CAACa,GAAN,CAAUZ,GAAV,EAAeI,MAAf;AAAyB;;AAAC,SAAOA,MAAP;AAAgB;;AAEvuB,SAASpB,sBAAT,CAAgCgB,GAAhC,EAAqC;AAAE,SAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;AAAElB,IAAAA,OAAO,EAAEkB;AAAX,GAArC;AAAwD;AAE/F;;;;;IAGMa,Q;;;AACJ;;;AAGA,sBAAc;AAAA;;AACZ;;;;;;;;;;;AAWA,SAAK/B,OAAL,GAAegC,SAAf;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA,SAAKC,QAAL,GAAgB,EAAhB;AACArC,IAAAA,MAAM,CAACC,cAAP,CAAsB,IAAtB,EAA4B,UAA5B,EAAwC;AACtCE,MAAAA,KAAK,EAAE,IAAImC,GAAJ;AAD+B,KAAxC;AAGD;AACD;;;;;;;;;;;AAWA;;;;;;;;wBAUIC,G,EAAK;AACP,UAAMC,KAAK,GAAGvB,MAAM,CAACb,OAAP,CAAeqC,OAAf,CAAuBF,GAAvB,EAA4B;AACxCF,QAAAA,QAAQ,EAAE,KAAKA;AADyB,OAA5B,CAAd;;AAIA,WAAKK,QAAL,CAAcF,KAAd;AACA,aAAOA,KAAP;AACD;AACD;;;;;;;;;6BAQSA,K,EAAO;AACd,UAAI,EAAEA,KAAK,YAAYvB,MAAM,CAACb,OAA1B,CAAJ,EAAwC,MAAM,IAAIuC,KAAJ,CAAU,6CAAV,CAAN;AACxC,UAAI,OAAOH,KAAK,CAACI,IAAb,KAAsB,QAA1B,EAAoC,MAAM,IAAID,KAAJ,CAAU,qCAAV,CAAN;AACpC,WAAKE,QAAL,CAAcX,GAAd,CAAkBM,KAAK,CAACI,IAAxB,EAA8BJ,KAA9B;AACD;AACD;;;;;;4BAKQ;AACN,aAAO,KAAKK,QAAL,CAAcC,KAAd,EAAP;AACD;AACD;;;;;;;;;;4BASOF,I,EAAM;AACX,aAAO,KAAKC,QAAL,CAAcE,MAAd,CAAqBH,IAArB,CAAP;AACD;AACD;;;;;;;;;;;;;wBAYIA,I,EAAwB;AAAA,UAAlBI,QAAkB,uEAAP,KAAO;AAC1B,UAAMR,KAAK,GAAG,KAAKK,QAAL,CAAcpB,GAAd,CAAkBmB,IAAlB,CAAd;AACA,aAAOI,QAAQ,GAAGR,KAAK,IAAI,KAAKpC,OAAd,IAAyBc,SAAS,CAACd,OAAtC,GAAgDoC,KAA/D;AACD;AACD;;;;;;;;;;;;;;;iCAcaA,K,EAAOS,I,EAAM;AACxB,UAAMC,aAAa,GAAGV,KAAK,YAAYvB,MAAM,CAACb,OAAxB,GAAkCoC,KAAlC,GAA0C,KAAKf,GAAL,CAASe,KAAT,CAAhE;AACA,UAAMW,KAAK,GAAGD,aAAa,GAAG,KAAKE,aAAL,CAAmBF,aAAnB,EAAkCG,GAAlC,CAAsC,UAAAC,CAAC;AAAA,eAAIA,CAAC,CAACL,IAAF,CAAOA,IAAP,CAAJ;AAAA,OAAvC,EAAyDM,MAAzD,CAAgE,UAAAC,CAAC;AAAA,eAAIA,CAAJ;AAAA,OAAjE,CAAH,GAA6E,EAAxG,CAFwB,CAEoF;;AAE5G,UAAIL,KAAK,CAACM,MAAN,GAAe,CAAf,IAAoBN,KAAK,CAACO,KAAN,CAAY,UAAAF,CAAC;AAAA,eAAIG,KAAK,CAACC,OAAN,CAAcJ,CAAd,CAAJ;AAAA,OAAb,CAAxB,EAA4D;AAC1D,YAAMK,WAAW,GAAG,EAApB;AAD0D;AAAA;AAAA;;AAAA;AAG1D,+BAAgBV,KAAhB;AAAA,gBAAWK,CAAX;AAAuBK,YAAAA,WAAW,CAACC,OAAZ,OAAAD,WAAW,qBAAYL,CAAZ,EAAX;AAAvB;AAH0D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAK1D,eAAOK,WAAP;AACD;;AAED,aAAOV,KAAK,CAAC,CAAD,CAAZ;AACD;AACD;;;;;;;;;;;;;;iCAaaX,K,EAAOuB,I,EAAM;AACxB,UAAMb,aAAa,GAAGV,KAAK,YAAYvB,MAAM,CAACb,OAAxB,GAAkCoC,KAAlC,GAA0C,KAAKf,GAAL,CAASe,KAAT,CAAhE;AACA,UAAMwB,KAAK,GAAGd,aAAa,GAAG,KAAKE,aAAL,CAAmBF,aAAnB,EAAkCG,GAAlC,CAAsC,UAAAC,CAAC;AAAA,eAAIA,CAAC,CAACS,IAAD,CAAL;AAAA,OAAvC,CAAH,GAAyD,EAApF;AACA,aAAO,6BAAIC,KAAJ,IAAW,KAAK5D,OAAL,IAAgB,KAAKA,OAAL,CAAa2D,IAAb,CAA3B,EAA+C7C,SAAS,CAACd,OAAV,CAAkB2D,IAAlB,CAA/C,GAAwEE,IAAxE,CAA6E,UAAAX,CAAC;AAAA,eAAIA,CAAJ;AAAA,OAA9E,CAAP;AACD;AACD;;;;;;;;;;wBASIV,I,EAAM;AACR,aAAO,KAAKC,QAAL,CAAcrB,GAAd,CAAkBoB,IAAlB,CAAP;AACD;AACD;;;;;;;;;;;;;;;;;;;;;;yBAqBKA,I,EAAiB;AAAA;;AAAA,UAAXsB,IAAW,uEAAJ,EAAI;AACpB,UAAMC,aAAa,GAAG,CAAC;AACrBC,QAAAA,GAAG,EAAE;AADgB,OAAD,CAAtB;AAGA,UAAM5B,KAAK,GAAG,KAAKf,GAAL,CAASmB,IAAT,EAAe,IAAf,CAAd;AACA,UAAIsB,IAAI,CAACG,SAAT,EAAoBF,aAAa,CAACL,OAAd,CAAsB;AACxCM,QAAAA,GAAG,EAAE;AADmC,OAAtB,EAEjB;AACDA,QAAAA,GAAG,EAAE;AADJ,OAFiB;;AAMpB,UAAME,aAAa,GAAG,SAAhBA,aAAgB,CAAA/B,GAAG,EAAI;AAC3B,YAAI,CAACA,GAAL,EAAU,OAAOH,SAAP;;AAEV,YAAI;AACF,iBAAO,CAAC,GAAG/B,QAAQ,CAACD,OAAb,EAAsB,CAAC,CAAC,GAAGO,SAAS,CAACP,OAAd,EAAuB,KAAvB,CAAD,CAAtB,EAAsDmE,OAAtD,CAA8DhC,GAA9D,EAAmEA,GAA1E;AACD,SAFD,CAEE,OAAOiC,CAAP,EAAU;AACV,iBAAOpC,SAAP;AACD;AACF,OARD;;AAUA,UAAMqC,KAAK,GAAGH,aAAa,CAACJ,IAAI,CAACO,KAAN,CAA3B;AACA,UAAMC,MAAM,GAAGJ,aAAa,CAACJ,IAAI,CAACQ,MAAN,CAA5B;AACA,UAAMC,MAAM,GAAG,CAAC,GAAGtE,QAAQ,CAACD,OAAb,EAAsB,CAACsE,MAAM,IAAK,UAAAnC,GAAG;AAAA,eAAIA,GAAG,CAACqC,KAAJ,CAAUF,MAAV,CAAiBA,MAAjB,CAAJ;AAAA,OAAf,EAA8CD,KAAK,IAAK,UAAAlC,GAAG;AAAA,eAAIA,GAAG,CAACsC,IAAJ,CAASJ,KAAT,CAAeA,KAAf,CAAJ;AAAA,OAA3D,EAAuF/D,OAAO,CAACN,OAA/F,EAAwG,CAAC,GAAGK,QAAQ,CAACL,OAAb,EAAsB,IAAtB,CAAxG,EAAqI8D,IAAI,CAACY,SAAL,IAAkB,CAAC,GAAGjE,UAAU,CAACT,OAAf,EAAwB;AAClN2E,QAAAA,KAAK,EAAE,KAAKC,YAAL,CAAkBxC,KAAlB,EAAyB,OAAzB,CAD2M;AAElNyC,QAAAA,MAAM,EAAE,KAAKD,YAAL,CAAkBxC,KAAlB,EAAyB,QAAzB;AAF0M,OAAxB,CAAvJ,EAGjCA,KAAK,KAAKtB,SAAS,CAACd,OAApB,IAAgC,UAAAmC,GAAG;AAAA,eAAIA,GAAG,CAACqC,KAAJ,CAAUF,MAAV,CAAiBxD,SAAS,CAACd,OAAV,CAAkBmC,GAAnC,CAAJ;AAAA,OAHF,EAGgD2B,IAAI,CAACG,SAAL,IAAkB7D,oBAAoB,CAACJ,OAHvF,EAGgGQ,WAAW,CAACR,OAH5G,EAGqHW,QAAQ,CAACX,OAH9H,EAGuI,CAAC,GAAGY,SAAS,CAACZ,OAAd,EAAuB8D,IAAI,CAACgB,UAA5B,EAAwCf,aAAxC,CAHvI,EAG+LD,IAAI,CAACY,SAAL,IAAkBjE,UAAU,CAACsE,WAH5N,EAGyOzE,OAAO,CAACN,OAHjP,EAG0PmD,MAH1P,CAGiQ,UAAA6B,CAAC;AAAA,eAAIA,CAAJ;AAAA,OAHlQ,CAAtB,CAAf;AAIA,aAAOT,MAAM,CAACJ,OAAP,CAAe/B,KAAK,CAACD,GAArB,EAA0BA,GAAjC;AACD;AACD;;;;;;;;;6BAQS;AACP,aAAO,KAAKM,QAAL,CAAcwC,MAAd,EAAP;AACD;AACD;;;;;;;;;;;kCAUc7C,K,EAA4B;AAAA;;AAAA,UAArB8C,cAAqB,uEAAJ,EAAI;AAAA,UAEtC1C,IAFsC,GAGpCJ,KAHoC,CAEtCI,IAFsC;AAIxC,UAAI0C,cAAc,CAACC,QAAf,CAAwB3C,IAAxB,CAAJ,EAAmC,MAAM,IAAID,KAAJ,sBAAuBC,IAAvB,kCAAN;AACnC,UAAM4C,cAAc,GAAG,CAAChD,KAAD,CAAvB;AACAA,MAAAA,KAAK,CAACiD,WAAN,CAAkBC,OAAlB,CAA0B,UAAAlC,CAAC,EAAI;AAC7B,YAAMmC,WAAW,GAAG,MAAI,CAAClE,GAAL,CAAS+B,CAAC,CAACrD,KAAX,CAApB;;AACA,YAAIwF,WAAJ,EAAiBH,cAAc,CAACI,IAAf,OAAAJ,cAAc,qBAAS,MAAI,CAACpC,aAAL,CAAmBuC,WAAnB,EAAgC,6BAAIL,cAAJ,IAAoB1C,IAApB,GAA0BW,MAA1B,CAAiC,UAAAsC,CAAC;AAAA,iBAAIA,CAAJ;AAAA,SAAlC,CAAhC,CAAT,EAAd;AAClB,OAHD;AAIA,aAAOL,cAAc,CAACjC,MAAf,CAAsB,UAAAuC,CAAC;AAAA,eAAIA,CAAJ;AAAA,OAAvB,CAAP;AACD;;;wBAlNU;AACT,aAAO,KAAKjD,QAAL,CAAckD,IAArB;AACD;;;;;;AAoNH,IAAIC,QAAQ,GAAG7D,QAAf;AACAjC,OAAO,CAACE,OAAR,GAAkB4F,QAAlB","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _postcss = _interopRequireDefault(require(\"postcss\"));\n\nvar _advanced_background = _interopRequireDefault(require(\"./postcss/advanced_background\"));\n\nvar _replace = _interopRequireDefault(require(\"./postcss/import/replace\"));\n\nvar _rollup = _interopRequireDefault(require(\"./postcss/import/rollup\"));\n\nvar _suppress = _interopRequireDefault(require(\"./postcss/import/suppress\"));\n\nvar _pagination = _interopRequireDefault(require(\"./postcss/pagination\"));\n\nvar _printable = _interopRequireWildcard(require(\"./postcss/printable\"));\n\nvar _prepend = _interopRequireDefault(require(\"./postcss/pseudo_selector/prepend\"));\n\nvar _replace2 = _interopRequireDefault(require(\"./postcss/pseudo_selector/replace\"));\n\nvar _theme = _interopRequireDefault(require(\"./theme\"));\n\nvar _scaffold = _interopRequireDefault(require(\"./theme/scaffold\"));\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Marpit theme set class.\n */\nclass ThemeSet {\n  /**\n   * Create a ThemeSet instance.\n   */\n  constructor() {\n    /**\n     * An instance of default theme.\n     *\n     * While running {@link ThemeSet#pack}, ThemeSet will use this theme when\n     * the definition of theme directive or the theme with specified name is not\n     * found.\n     *\n     * By default, Marpit does not provide default theme (`undefined`).\n     *\n     * @type {Theme|undefined}\n     */\n    this.default = undefined;\n    /**\n     * The default type settings for theme metadata added by\n     * {@link ThemeSet#add}.\n     *\n     * A key of object is the name of metadata and a value is the type which of\n     * `String` and `Array`. You have to set `Array` if the theme allows\n     * multi-time definitions in same meta key.\n     *\n     * ```css\n     * /**\n     *  * @theme example\n     *  * @foo Single value\n     *  * @foo allows only one string\n     *  * @bar Multiple value 1\n     *  * @bar Multiple value 2\n     *  * @bar Multiple value 3\n     *  * ...\n     * ```\n     *\n     * ```js\n     * const themeSet = new ThemeSet()\n     *\n     * themeSet.metaType = {\n     *   foo: String,\n     *   bar: Array,\n     * }\n     *\n     * themeSet.add(css)\n     *\n     * console.log(themeSet.getThemeMeta('example', 'foo'))\n     * // => 'allows only one string'\n     *\n     * console.log(themeSet.getThemeMeta('example', 'bar'))\n     * // => ['Multiple value 1', 'Multiple value 2', 'Multiple value 3']\n     * ```\n     *\n     * @type {Object}\n     */\n\n    this.metaType = {};\n    Object.defineProperty(this, 'themeMap', {\n      value: new Map()\n    });\n  }\n  /**\n   * Return the number of themes.\n   *\n   * @type {number}\n   * @readonly\n   */\n\n\n  get size() {\n    return this.themeMap.size;\n  }\n  /**\n   * Add theme CSS from string.\n   *\n   * @param {string} css The theme CSS string.\n   * @returns {Theme} A created {@link Theme} instance.\n   * @throws Will throw an error if the theme name is not specified by `@theme`\n   *     metadata.\n   */\n\n\n  add(css) {\n    const theme = _theme.default.fromCSS(css, {\n      metaType: this.metaType\n    });\n\n    this.addTheme(theme);\n    return theme;\n  }\n  /**\n   * Add theme instance.\n   *\n   * @param {Theme} theme The theme instance.\n   * @throws Will throw an error if the theme name is not specified.\n   */\n\n\n  addTheme(theme) {\n    if (!(theme instanceof _theme.default)) throw new Error('ThemeSet can add only an instance of Theme.');\n    if (typeof theme.name !== 'string') throw new Error('An instance of Theme requires name.');\n    this.themeMap.set(theme.name, theme);\n  }\n  /**\n   * Removes all themes from a {@link themeSet} object.\n   */\n\n\n  clear() {\n    return this.themeMap.clear();\n  }\n  /**\n   * Remove a specific named theme from a {@link themeSet} object.\n   *\n   * @param {string} name The theme name to delete.\n   * @returns {boolean} Returns `true` if a theme in current {@link ThemeSet}\n   *     existed and has been removed, or `false` if the theme does not exist.\n   */\n\n\n  delete(name) {\n    return this.themeMap.delete(name);\n  }\n  /**\n   * Returns a specific named theme.\n   *\n   * @param {string} name The theme name to get.\n   * @param {boolean} [fallback=false] If true, return instance's default theme\n   *     or scaffold theme when specified theme cannot find.\n   * @returns {Theme|undefined} Returns specified or fallbacked theme, or\n   *     `undefined` if `fallback` is false and the specified theme has not\n   *     existed.\n   */\n\n\n  get(name, fallback = false) {\n    const theme = this.themeMap.get(name);\n    return fallback ? theme || this.default || _scaffold.default : theme;\n  }\n  /**\n   * Returns value(s) of specified metadata from a theme. It considers `@import`\n   * and `@import-theme` rules in getting meta value. On the other hand, the\n   * default theme specified by the instance is not considered.\n   *\n   * To support metadata with array type, it will merge into a flatten array\n   * when the all of got valid values that includes imported themes are array.\n   *\n   * @param {string|Theme} theme The theme name or instance.\n   * @param {string} meta The meta name to get.\n   * @returns {string|string[]|undefined}\n   */\n\n\n  getThemeMeta(theme, meta) {\n    const themeInstance = theme instanceof _theme.default ? theme : this.get(theme);\n    const metas = themeInstance ? this.resolveImport(themeInstance).map(t => t.meta[meta]).filter(m => m) : []; // Flatten in order of definitions when the all of valid values are array\n\n    if (metas.length > 0 && metas.every(m => Array.isArray(m))) {\n      const mergedArray = [];\n\n      for (const m of metas) mergedArray.unshift(...m);\n\n      return mergedArray;\n    }\n\n    return metas[0];\n  }\n  /**\n   * Returns the value of specified property name from a theme. It considers\n   * `@import` and `@import-theme` rules in getting value.\n   *\n   * It will fallback the reference object into the instance's default theme or\n   * scaffold theme when the specified theme is `undefined`.\n   *\n   * @param {string|Theme} theme The theme name or instance.\n   * @param {string} prop The property name to get.\n   * @returns {*}\n   */\n\n\n  getThemeProp(theme, prop) {\n    const themeInstance = theme instanceof _theme.default ? theme : this.get(theme);\n    const props = themeInstance ? this.resolveImport(themeInstance).map(t => t[prop]) : [];\n    return [...props, this.default && this.default[prop], _scaffold.default[prop]].find(t => t);\n  }\n  /**\n   * Returns a boolean indicating whether a specific named theme exists or not.\n   *\n   * @param {string} name The theme name.\n   * @returns {boolean} Returns `true` if a specific named theme exists,\n   *     otherwise `false`.\n   */\n\n\n  has(name) {\n    return this.themeMap.has(name);\n  }\n  /**\n   * Convert registered theme CSS into usable in the rendered markdown by\n   * {@link Marpit#render}.\n   *\n   * You should use {@link Marpit#render} unless there is some particular\n   * reason.\n   *\n   * @param {string} name The theme name. It will use the instance's default\n   *     theme or scaffold theme when a specific named theme does not exist.\n   * @param {Object} [opts] The option object passed by {@link Marpit#render}.\n   * @param {string} [opts.after] A CSS string to append into after theme.\n   * @param {string} [opts.before] A CSS string to prepend into before theme.\n   * @param {Element[]} [opts.containers] Container elements wrapping whole\n   *     slide deck.\n   * @param {boolean} [opts.printable] Make style printable to PDF.\n   * @param {boolean} [opts.inlineSVG] Apply a hierarchy of inline SVG to CSS\n   *     selector by setting `true`. _(Experimental)_\n   * @return {string} The converted CSS string.\n   */\n\n\n  pack(name, opts = {}) {\n    const slideElements = [{\n      tag: 'section'\n    }];\n    const theme = this.get(name, true);\n    if (opts.inlineSVG) slideElements.unshift({\n      tag: 'svg'\n    }, {\n      tag: 'foreignObject'\n    });\n\n    const additionalCSS = css => {\n      if (!css) return undefined;\n\n      try {\n        return (0, _postcss.default)([(0, _suppress.default)(this)]).process(css).css;\n      } catch (e) {\n        return undefined;\n      }\n    };\n\n    const after = additionalCSS(opts.after);\n    const before = additionalCSS(opts.before);\n    const packer = (0, _postcss.default)([before && (css => css.first.before(before)), after && (css => css.last.after(after)), _rollup.default, (0, _replace.default)(this), opts.printable && (0, _printable.default)({\n      width: this.getThemeProp(theme, 'width'),\n      height: this.getThemeProp(theme, 'height')\n    }), theme !== _scaffold.default && (css => css.first.before(_scaffold.default.css)), opts.inlineSVG && _advanced_background.default, _pagination.default, _prepend.default, (0, _replace2.default)(opts.containers, slideElements), opts.printable && _printable.postprocess, _rollup.default].filter(p => p));\n    return packer.process(theme.css).css;\n  }\n  /**\n   * Returns a `Iterator` object that contains registered themes to current\n   * instance.\n   *\n   * @returns {Iterator.<Theme>}\n   */\n\n\n  themes() {\n    return this.themeMap.values();\n  }\n  /**\n   * Resolves `@import` and `@import-theme` and returns an array of using theme\n   * instances.\n   *\n   * @private\n   * @param {Theme} theme Theme instance\n   * @returns {Theme[]}\n   */\n\n\n  resolveImport(theme, importedThemes = []) {\n    const {\n      name\n    } = theme;\n    if (importedThemes.includes(name)) throw new Error(`Circular \"${name}\" theme import is detected.`);\n    const resolvedThemes = [theme];\n    theme.importRules.forEach(m => {\n      const importTheme = this.get(m.value);\n      if (importTheme) resolvedThemes.push(...this.resolveImport(importTheme, [...importedThemes, name].filter(n => n)));\n    });\n    return resolvedThemes.filter(v => v);\n  }\n\n}\n\nvar _default = ThemeSet;\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}