{"ast":null,"code":"\"use strict\";\n\nvar _toConsumableArray = require(\"/Users/yaozixuan/Document/OOSE/my-app/node_modules/@babel/runtime/helpers/toConsumableArray\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _lodash = _interopRequireDefault(require(\"lodash.kebabcase\"));\n\nvar _directives = _interopRequireDefault(require(\"./directives\"));\n\nvar _plugin = _interopRequireDefault(require(\"../../plugin\"));\n\nvar _inline_style = _interopRequireDefault(require(\"../../helpers/inline_style\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/** @module */\n\n/**\n * Apply parsed Marpit directives to markdown-it tokens.\n *\n * @alias module:markdown/directives/apply\n * @param {MarkdownIt} md markdown-it instance.\n * @param {Object} [opts]\n * @param {boolean} [opts.dataset=true] Assigns directives as HTML data\n *     attributes of each section tag.\n * @param {boolean} [opts.css=true] Assigns directives as CSS Custom Properties\n *     of each section tag.\n */\n\n\nfunction apply(md) {\n  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var marpit = md.marpit;\n  var dataset = opts.dataset === undefined ? true : !!opts.dataset;\n  var css = opts.css === undefined ? true : !!opts.css;\n  var _marpit$customDirecti = marpit.customDirectives,\n      global = _marpit$customDirecti.global,\n      local = _marpit$customDirecti.local;\n  var directives = [].concat(_toConsumableArray(Object.keys(global)), _toConsumableArray(Object.keys(local)), _toConsumableArray(_directives.default));\n  md.core.ruler.after('marpit_directives_parse', 'marpit_directives_apply', function (state) {\n    if (state.inlineMode) return;\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = state.tokens[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var token = _step.value;\n\n        var _ref = token.meta || {},\n            marpitDirectives = _ref.marpitDirectives,\n            marpitSlide = _ref.marpitSlide,\n            marpitSlideTotal = _ref.marpitSlideTotal;\n\n        if (marpitDirectives) {\n          var style = new _inline_style.default(token.attrGet('style'));\n\n          for (var _i = 0, _Object$keys = Object.keys(marpitDirectives); _i < _Object$keys.length; _i++) {\n            var dir = _Object$keys[_i];\n\n            if (directives.includes(dir)) {\n              var value = marpitDirectives[dir];\n\n              if (value) {\n                var kebabCaseDir = (0, _lodash.default)(dir);\n                if (dataset) token.attrSet(\"data-\".concat(kebabCaseDir), value);\n                if (css) style.set(\"--\".concat(kebabCaseDir), value);\n              }\n            }\n          } // Apply attribute to token\n\n\n          if (marpitDirectives.class) token.attrJoin('class', marpitDirectives.class);\n          if (marpitDirectives.color) style.set('color', marpitDirectives.color);\n          if (marpitDirectives.backgroundColor) style.set('background-color', marpitDirectives.backgroundColor).set('background-image', 'none');\n\n          if (marpitDirectives.backgroundImage) {\n            style.set('background-image', marpitDirectives.backgroundImage).set('background-position', 'center').set('background-repeat', 'no-repeat').set('background-size', 'cover');\n            if (marpitDirectives.backgroundPosition) style.set('background-position', marpitDirectives.backgroundPosition);\n            if (marpitDirectives.backgroundRepeat) style.set('background-repeat', marpitDirectives.backgroundRepeat);\n            if (marpitDirectives.backgroundSize) style.set('background-size', marpitDirectives.backgroundSize);\n          }\n\n          if (marpitDirectives.paginate) {\n            token.attrSet('data-marpit-pagination', marpitSlide + 1);\n            token.attrSet('data-marpit-pagination-total', marpitSlideTotal);\n          }\n\n          if (marpitDirectives.header) token.meta.marpitHeader = marpitDirectives.header;\n          if (marpitDirectives.footer) token.meta.marpitFooter = marpitDirectives.footer;\n          var styleStr = style.toString();\n          if (styleStr !== '') token.attrSet('style', styleStr);\n        }\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return != null) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n  });\n}\n\nvar _default = (0, _plugin.default)(apply);\n\nexports.default = _default;","map":{"version":3,"sources":["/Users/yaozixuan/Document/OOSE/my-app/node_modules/@marp-team/marpit/lib/markdown/directives/apply.js"],"names":["Object","defineProperty","exports","value","default","_lodash","_interopRequireDefault","require","_directives","_plugin","_inline_style","obj","__esModule","apply","md","opts","marpit","dataset","undefined","css","customDirectives","global","local","directives","keys","core","ruler","after","state","inlineMode","tokens","token","meta","marpitDirectives","marpitSlide","marpitSlideTotal","style","attrGet","dir","includes","kebabCaseDir","attrSet","set","class","attrJoin","color","backgroundColor","backgroundImage","backgroundPosition","backgroundRepeat","backgroundSize","paginate","header","marpitHeader","footer","marpitFooter","styleStr","toString","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _lodash = _interopRequireDefault(require(\"lodash.kebabcase\"));\n\nvar _directives = _interopRequireDefault(require(\"./directives\"));\n\nvar _plugin = _interopRequireDefault(require(\"../../plugin\"));\n\nvar _inline_style = _interopRequireDefault(require(\"../../helpers/inline_style\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/** @module */\n\n/**\n * Apply parsed Marpit directives to markdown-it tokens.\n *\n * @alias module:markdown/directives/apply\n * @param {MarkdownIt} md markdown-it instance.\n * @param {Object} [opts]\n * @param {boolean} [opts.dataset=true] Assigns directives as HTML data\n *     attributes of each section tag.\n * @param {boolean} [opts.css=true] Assigns directives as CSS Custom Properties\n *     of each section tag.\n */\nfunction apply(md, opts = {}) {\n  const {\n    marpit\n  } = md;\n  const dataset = opts.dataset === undefined ? true : !!opts.dataset;\n  const css = opts.css === undefined ? true : !!opts.css;\n  const {\n    global,\n    local\n  } = marpit.customDirectives;\n  const directives = [...Object.keys(global), ...Object.keys(local), ..._directives.default];\n  md.core.ruler.after('marpit_directives_parse', 'marpit_directives_apply', state => {\n    if (state.inlineMode) return;\n\n    for (const token of state.tokens) {\n      const {\n        marpitDirectives,\n        marpitSlide,\n        marpitSlideTotal\n      } = token.meta || {};\n\n      if (marpitDirectives) {\n        const style = new _inline_style.default(token.attrGet('style'));\n\n        for (const dir of Object.keys(marpitDirectives)) {\n          if (directives.includes(dir)) {\n            const value = marpitDirectives[dir];\n\n            if (value) {\n              const kebabCaseDir = (0, _lodash.default)(dir);\n              if (dataset) token.attrSet(`data-${kebabCaseDir}`, value);\n              if (css) style.set(`--${kebabCaseDir}`, value);\n            }\n          }\n        } // Apply attribute to token\n\n\n        if (marpitDirectives.class) token.attrJoin('class', marpitDirectives.class);\n        if (marpitDirectives.color) style.set('color', marpitDirectives.color);\n        if (marpitDirectives.backgroundColor) style.set('background-color', marpitDirectives.backgroundColor).set('background-image', 'none');\n\n        if (marpitDirectives.backgroundImage) {\n          style.set('background-image', marpitDirectives.backgroundImage).set('background-position', 'center').set('background-repeat', 'no-repeat').set('background-size', 'cover');\n          if (marpitDirectives.backgroundPosition) style.set('background-position', marpitDirectives.backgroundPosition);\n          if (marpitDirectives.backgroundRepeat) style.set('background-repeat', marpitDirectives.backgroundRepeat);\n          if (marpitDirectives.backgroundSize) style.set('background-size', marpitDirectives.backgroundSize);\n        }\n\n        if (marpitDirectives.paginate) {\n          token.attrSet('data-marpit-pagination', marpitSlide + 1);\n          token.attrSet('data-marpit-pagination-total', marpitSlideTotal);\n        }\n\n        if (marpitDirectives.header) token.meta.marpitHeader = marpitDirectives.header;\n        if (marpitDirectives.footer) token.meta.marpitFooter = marpitDirectives.footer;\n        const styleStr = style.toString();\n        if (styleStr !== '') token.attrSet('style', styleStr);\n      }\n    }\n  });\n}\n\nvar _default = (0, _plugin.default)(apply);\n\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}